{"ast":null,"code":"// src/App.js\nimport{useState,useEffect}from\"react\";import\"./App.css\";import Dashboard from\"./components/Dashboard\";import Login from\"./components/Login\";import LandingPage from\"./components/LandingPage\";import{jsx as _jsx}from\"react/jsx-runtime\";function App(){const[role,setRole]=useState(null);// 'guest' | 'admin' | null\nconst[stage,setStage]=useState(\"landing\");// 'landing' | 'login' | 'dashboard'\n// 새로고침해도 로그인 유지 (localStorage)\nuseEffect(()=>{const saved=window.localStorage.getItem(\"landmine_role\");if(saved===\"guest\"||saved===\"admin\"){// 역할만 복원하고, stage는 그대로 'landing' 유지\n// -> 무조건 랜딩 먼저 보여주고, Try Now 누르면 바로 대시보드로 가게\nsetRole(saved);}},[]);const handleLogin=selectedRole=>{setRole(selectedRole);window.localStorage.setItem(\"landmine_role\",selectedRole);setStage(\"dashboard\");};const handleLogout=()=>{setRole(null);window.localStorage.removeItem(\"landmine_role\");setStage(\"landing\");// 로그아웃하면 다시 랜딩으로\n};const handleEnterFromLanding=()=>{// 랜딩에서 Try Now 눌렀을 때:\n// 이미 role 있으면 바로 대시보드, 없으면 로그인 페이지로\nif(role===\"guest\"||role===\"admin\"){setStage(\"dashboard\");}else{setStage(\"login\");}};// 1) 랜딩 페이지 단계\nif(stage===\"landing\"){return/*#__PURE__*/_jsx(LandingPage,{onEnterDashboard:handleEnterFromLanding});}// 2) 로그인 단계\nif(stage===\"login\"&&!role){return/*#__PURE__*/_jsx(Login,{onLogin:handleLogin});}// 3) 그 외에는 대시보드\nreturn/*#__PURE__*/_jsx(Dashboard,{role:role,onLogout:handleLogout});}export default App;","map":{"version":3,"names":["useState","useEffect","Dashboard","Login","LandingPage","jsx","_jsx","App","role","setRole","stage","setStage","saved","window","localStorage","getItem","handleLogin","selectedRole","setItem","handleLogout","removeItem","handleEnterFromLanding","onEnterDashboard","onLogin","onLogout"],"sources":["C:/Users/jjoon/OneDrive/Documents/LogNConding_Landmine-main/src/App.js"],"sourcesContent":["// src/App.js\n\nimport { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport Dashboard from \"./components/Dashboard\";\nimport Login from \"./components/Login\";\nimport LandingPage from \"./components/LandingPage\";\n\nfunction App() {\n  const [role, setRole] = useState(null);           // 'guest' | 'admin' | null\n  const [stage, setStage] = useState(\"landing\");    // 'landing' | 'login' | 'dashboard'\n\n  // 새로고침해도 로그인 유지 (localStorage)\n  useEffect(() => {\n    const saved = window.localStorage.getItem(\"landmine_role\");\n    if (saved === \"guest\" || saved === \"admin\") {\n      // 역할만 복원하고, stage는 그대로 'landing' 유지\n      // -> 무조건 랜딩 먼저 보여주고, Try Now 누르면 바로 대시보드로 가게\n      setRole(saved);\n    }\n  }, []);\n\n  const handleLogin = (selectedRole) => {\n    setRole(selectedRole);\n    window.localStorage.setItem(\"landmine_role\", selectedRole);\n    setStage(\"dashboard\");\n  };\n\n  const handleLogout = () => {\n    setRole(null);\n    window.localStorage.removeItem(\"landmine_role\");\n    setStage(\"landing\"); // 로그아웃하면 다시 랜딩으로\n  };\n\n  const handleEnterFromLanding = () => {\n    // 랜딩에서 Try Now 눌렀을 때:\n    // 이미 role 있으면 바로 대시보드, 없으면 로그인 페이지로\n    if (role === \"guest\" || role === \"admin\") {\n      setStage(\"dashboard\");\n    } else {\n      setStage(\"login\");\n    }\n  };\n\n  // 1) 랜딩 페이지 단계\n  if (stage === \"landing\") {\n    return <LandingPage onEnterDashboard={handleEnterFromLanding} />;\n  }\n\n  // 2) 로그인 단계\n  if (stage === \"login\" && !role) {\n    return <Login onLogin={handleLogin} />;\n  }\n\n  // 3) 그 외에는 대시보드\n  return <Dashboard role={role} onLogout={handleLogout} />;\n}\n\nexport default App;\n"],"mappings":"AAAA;AAEA,OAASA,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAO,WAAW,CAClB,MAAO,CAAAC,SAAS,KAAM,wBAAwB,CAC9C,MAAO,CAAAC,KAAK,KAAM,oBAAoB,CACtC,MAAO,CAAAC,WAAW,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,QAAS,CAAAC,GAAGA,CAAA,CAAG,CACb,KAAM,CAACC,IAAI,CAAEC,OAAO,CAAC,CAAGT,QAAQ,CAAC,IAAI,CAAC,CAAY;AAClD,KAAM,CAACU,KAAK,CAAEC,QAAQ,CAAC,CAAGX,QAAQ,CAAC,SAAS,CAAC,CAAK;AAElD;AACAC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAW,KAAK,CAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,eAAe,CAAC,CAC1D,GAAIH,KAAK,GAAK,OAAO,EAAIA,KAAK,GAAK,OAAO,CAAE,CAC1C;AACA;AACAH,OAAO,CAACG,KAAK,CAAC,CAChB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAI,WAAW,CAAIC,YAAY,EAAK,CACpCR,OAAO,CAACQ,YAAY,CAAC,CACrBJ,MAAM,CAACC,YAAY,CAACI,OAAO,CAAC,eAAe,CAAED,YAAY,CAAC,CAC1DN,QAAQ,CAAC,WAAW,CAAC,CACvB,CAAC,CAED,KAAM,CAAAQ,YAAY,CAAGA,CAAA,GAAM,CACzBV,OAAO,CAAC,IAAI,CAAC,CACbI,MAAM,CAACC,YAAY,CAACM,UAAU,CAAC,eAAe,CAAC,CAC/CT,QAAQ,CAAC,SAAS,CAAC,CAAE;AACvB,CAAC,CAED,KAAM,CAAAU,sBAAsB,CAAGA,CAAA,GAAM,CACnC;AACA;AACA,GAAIb,IAAI,GAAK,OAAO,EAAIA,IAAI,GAAK,OAAO,CAAE,CACxCG,QAAQ,CAAC,WAAW,CAAC,CACvB,CAAC,IAAM,CACLA,QAAQ,CAAC,OAAO,CAAC,CACnB,CACF,CAAC,CAED;AACA,GAAID,KAAK,GAAK,SAAS,CAAE,CACvB,mBAAOJ,IAAA,CAACF,WAAW,EAACkB,gBAAgB,CAAED,sBAAuB,CAAE,CAAC,CAClE,CAEA;AACA,GAAIX,KAAK,GAAK,OAAO,EAAI,CAACF,IAAI,CAAE,CAC9B,mBAAOF,IAAA,CAACH,KAAK,EAACoB,OAAO,CAAEP,WAAY,CAAE,CAAC,CACxC,CAEA;AACA,mBAAOV,IAAA,CAACJ,SAAS,EAACM,IAAI,CAAEA,IAAK,CAACgB,QAAQ,CAAEL,YAAa,CAAE,CAAC,CAC1D,CAEA,cAAe,CAAAZ,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}